<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Starter Template for Bootstrap</title>
    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,700,800" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/login.css">
    <script src="javascript/script.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    </head>

  <body>

    <div class=""></div>

    <div class="topBackground">
      <center>
        <img src="images/echoingWall.svg" class="logo">
      </center>
    </div>


<div class="signUpBackground">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">

          <form class="submitForm" id="moveToTop">

            <div class="form-group">
              <!-- <label for="exampleInputEmail1">Email address</label> -->
              <input type="username" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="First Name">
            </div>

            <div class="form-group">
              <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Last Name">
            </div>

            <div class="form-group">
              <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Email">
            </div>

            <div class="form-group">
              <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Validate Email">
            </div>

            <div class="form-group">
              <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
            </div>

            <div class="form-group">
              <input type="password" class="form-control" id="exampleInputPassword1" placeholder=" Validate Password">
            </div>

             <div class="form-group">
              <input type="tel" class="form-control" id="exampleInputPhone1" placeholder=" Phone Number">
            </div>

            <div class="form-group">
              <input type="text" class="form-control" id="examplePostalCode1" placeholder=" Postal Code">
            </div>           

            <div class="form-group">
              <input type="text" class="form-control" id="exampleCountry1" placeholder=" Country">
            </div>  

          </form>
          <form name="review" ACTION="index.html" METHOD="POST" onsubmit="return checkform(this);">
          <font color="#DD0000">Enter Code ></font> <span id="txtCaptchaDiv" style="background-color:#A51D22;color:#FFF;padding:5px"></span>
          <input type="hidden" id="txtCaptcha" />
          <input type="text" name="txtInput" id="txtInput" size="15" />
          <input type="submit" class = "btn btn-default pull-right moveToTop" id="signUpButton" value="Submit"/>
          </form>




                    


                    </div>
                  </div>
                </div>






                  <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
                </div>
              </div>
            </div>
          </div>





            </body>
              <script type="text/javascript">
              function checkform(theform){
                console.log("Checkform function")
              var why = "";

              if(theform.txtInput.value == ""){
              why += "- Security code should not be empty.\n";
              }
              if(theform.txtInput.value != ""){
              if(ValidCaptcha(theform.txtInput.value) == false){
              why += "- Security code did not match.\n";
              }
              }
              if(why != ""){
              alert(why);
              return false;
              }
              }

              //Generates the captcha function
              var a = Math.ceil(Math.random() * 9)+ '';
              var b = Math.ceil(Math.random() * 9)+ '';
              var c = Math.ceil(Math.random() * 9)+ '';
              var d = Math.ceil(Math.random() * 9)+ '';
              var e = Math.ceil(Math.random() * 9)+ '';
              console.log("Generate number")

              var code = a + b + c + d + e;
              document.getElementById("txtCaptcha").value = code;
              document.getElementById("txtCaptchaDiv").innerHTML = code;

              // Validate the Entered input aganist the generated security code function
              function ValidCaptcha(){
              var str1 = removeSpaces(document.getElementById('txtCaptcha').value);
              var str2 = removeSpaces(document.getElementById('txtInput').value);
              if (str1 == str2){
              return true;
              }else{
              return false;
              }
              }

              // Remove the spaces from the entered and generated code
              function removeSpaces(string){
              return string.split(' ').join('');
              }
              </script>

          </div>
        </div>
      </div>






        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
      </div>
    </div>
  </div>
</div>
            <footer>
              <div class="text-center">
                <p class="footerText">&copy; Echoing Wall 2017</p>
              </div>
            </footer>

    <script>
        $("#signUpButton").on("click", function() {
            console.log("inside signup")
            var returnedUser = {
                userName: $("#exampleInputEmail1").val().trim(),
                password: $("#exampleInputPassword1").val().trim(),
                screenName: $("#exampleInputEmail1").val().trim(),
                email: $("#exampleInputEmail1").val().trim(),
                phone: $("#exampleInputPhone1").val().trim(),
                postalCode: $("examplePostalCode1").val.trim(),
                country: $("exampleCountry1").val.trim(),
                interests: $("exampleInterests").val.trim()

            }
            $.post("/signup", returnedUser, function(data) {
                console.log(data);
                if (data.error) {
                    console.log("inside error")
                    $("#signupResult").html(data.error);
                } else {
                    console.log("before echoesing")
                    window.location = data;

                }
            });
        })
    </script>



  </body>
</html>
